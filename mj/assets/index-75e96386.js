import{i as z,f as de,d as y,r as A,a as O,w as R,g as N,p as te,h as fe,j as k,k as c,l as me,m as be,n as ge,q as ve,s as I,F,c as h,b as C,v as q,t as M,e as K,o as x,x as j,y as he,z as xe}from"./index-778571ea.js";import{a as Y}from"./axios-aba6f0e0.js";const E=e=>e!=null,_e=e=>typeof e=="function",ne=e=>e!==null&&typeof e=="object",ae=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),G=Object.assign,pe=typeof window<"u";function Z(e,t){const n=t.split(".");let a=e;return n.forEach(l=>{var i;a=ne(a)&&(i=a[l])!=null?i:""}),a}function ke(e,t,n){return t.reduce((a,l)=>((!n||e[l]!==void 0)&&(a[l]=e[l]),a),{})}const D=null,_=[Number,String],T={type:Boolean,default:!0},Ce=e=>({type:e,required:!0}),$=e=>({type:String,default:e});function ye(e){const t=z(e,null);if(t){const n=N(),{link:a,unlink:l,internalChildren:i}=t;a(n),de(()=>l(n));const d=y(()=>i.indexOf(n));return{parent:t,index:d}}return{parent:null,index:A(-1)}}function Ee(e){const t=[],n=a=>{Array.isArray(a)&&a.forEach(l=>{var i;fe(l)&&(t.push(l),(i=l.component)!=null&&i.subTree&&(t.push(l.component.subTree),n(l.component.subTree.children)),l.children&&n(l.children))})};return n(e),t}var W=(e,t)=>{const n=e.indexOf(t);return n===-1?e.findIndex(a=>t.key!==void 0&&t.key!==null&&a.type===t.type&&a.key===t.key):n};function $e(e,t,n){const a=Ee(e.subTree.children);n.sort((i,d)=>W(a,i.vnode)-W(a,d.vnode));const l=n.map(i=>i.proxy);t.sort((i,d)=>{const s=l.indexOf(i),o=l.indexOf(d);return s-o})}function Be(e){const t=O([]),n=O([]),a=N();return{children:t,linkChildren:i=>{te(e,Object.assign({link:o=>{o.proxy&&(n.push(o),t.push(o.proxy),$e(a,t,n))},unlink:o=>{const r=n.indexOf(o);t.splice(r,1),n.splice(r,1)},children:t,internalChildren:n},i))}}}var Se=Symbol("van-field");function we(e){const t=z(Se,null);t&&!t.customValue.value&&(t.customValue.value=e,R(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}function p(e){if(E(e))return ae(e)?`${e}px`:String(e)}const De=/-(\w)/g,oe=e=>e.replace(De,(t,n)=>n.toUpperCase()),Pe=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),{hasOwnProperty:Ve}=Object.prototype;function je(e,t,n){const a=t[n];E(a)&&(!Ve.call(e,n)||!ne(a)?e[n]=a:e[n]=ie(Object(e[n]),a))}function ie(e,t){return Object.keys(t).forEach(n=>{je(e,t,n)}),e}var Fe={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const J=A("zh-CN"),H=O({"zh-CN":Fe}),Oe={messages(){return H[J.value]},use(e,t){J.value=e,this.add({[e]:t})},add(e={}){ie(H,e)}};var Ae=Oe;function Te(e){const t=oe(e)+".";return(n,...a)=>{const l=Ae.messages(),i=Z(l,t+n)||Z(l,n);return _e(i)?i(...a):i}}function L(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,a)=>n+L(e,a),""):Object.keys(t).reduce((n,a)=>n+(t[a]?L(e,a):""),""):""}function Le(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${L(t,n)}`)}function B(e){const t=`van-${e}`;return[t,Le(t),Te(t)]}const Ue="van-hairline",ze=`${Ue}--top-bottom`;function P(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(oe(`-${n}`),e))},e}const Re={to:[String,Object],url:String,replace:Boolean};function Ne({to:e,url:t,replace:n,$router:a}){e&&a?a[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function Ie(){const e=N().proxy;return()=>Ne(e)}const[Ge,X]=B("badge"),qe={dot:Boolean,max:_,tag:$("div"),color:String,offset:Array,content:_,showZero:T,position:$("top-right")};var Me=k({name:Ge,props:qe,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:s,showZero:o}=e;return E(s)&&s!==""&&(o||s!==0&&s!=="0")},a=()=>{const{dot:s,max:o,content:r}=e;if(!s&&n())return t.content?t.content():E(o)&&ae(r)&&+r>o?`${o}+`:r},l=s=>s.startsWith("-")?s.replace("-",""):`-${s}`,i=y(()=>{const s={background:e.color};if(e.offset){const[o,r]=e.offset,{position:f}=e,[u,b]=f.split("-");t.default?(typeof r=="number"?s[u]=p(u==="top"?r:-r):s[u]=u==="top"?p(r):l(r),typeof o=="number"?s[b]=p(b==="left"?o:-o):s[b]=b==="left"?p(o):l(o)):(s.marginTop=p(r),s.marginLeft=p(o))}return s}),d=()=>{if(n()||e.dot)return c("div",{class:X([e.position,{dot:e.dot,fixed:!!t.default}]),style:i.value},[a()])};return()=>{if(t.default){const{tag:s}=e;return c(s,{class:X("wrapper")},{default:()=>[t.default(),d()]})}return d()}}});const Ke=P(Me),Ye=e=>{},[le,Ze]=B("config-provider"),re=Symbol(le),We={tag:$("div"),theme:$("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function Je(e){const t={};return Object.keys(e).forEach(n=>{t[`--van-${Pe(n)}`]=e[n]}),t}k({name:le,props:We,setup(e,{slots:t}){const n=y(()=>Je(G({},e.themeVars,e.theme==="dark"?e.themeVarsDark:e.themeVarsLight)));if(pe){const a=()=>{document.documentElement.classList.add(`van-theme-${e.theme}`)},l=(i=e.theme)=>{document.documentElement.classList.remove(`van-theme-${i}`)};R(()=>e.theme,(i,d)=>{d&&l(d),a()},{immediate:!0}),me(a),be(l),ge(l)}return te(re,e),ve(()=>{e.zIndex!==void 0&&Ye(e.zIndex)}),()=>c(e.tag,{class:Ze(),style:n.value},{default:()=>{var a;return[(a=t.default)==null?void 0:a.call(t)]}})}});const[He,Q]=B("icon"),Xe=e=>e==null?void 0:e.includes("/"),Qe={dot:Boolean,tag:$("i"),name:String,size:_,badge:_,color:String,badgeProps:Object,classPrefix:String};var et=k({name:He,props:Qe,setup(e,{slots:t}){const n=z(re,null),a=y(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||Q());return()=>{const{tag:l,dot:i,name:d,size:s,badge:o,color:r}=e,f=Xe(d);return c(Ke,I({dot:i,tag:l,class:[a.value,f?"":`${a.value}-${d}`],style:{color:r,fontSize:p(s)},content:o},e.badgeProps),{default:()=>{var u;return[(u=t.default)==null?void 0:u.call(t),f&&c("img",{class:Q("image"),src:d},null)]}})}}});const U=P(et),[tt,w]=B("cell"),nt={tag:$("div"),icon:String,size:String,title:_,value:_,label:_,center:Boolean,isLink:Boolean,border:T,required:Boolean,iconPrefix:String,valueClass:D,labelClass:D,titleClass:D,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},at=G({},nt,Re);var ot=k({name:tt,props:at,setup(e,{slots:t}){const n=Ie(),a=()=>{if(t.label||E(e.label))return c("div",{class:[w("label"),e.labelClass]},[t.label?t.label():e.label])},l=()=>{var o;if(t.title||E(e.title)){const r=(o=t.title)==null?void 0:o.call(t);return Array.isArray(r)&&r.length===0?void 0:c("div",{class:[w("title"),e.titleClass],style:e.titleStyle},[r||c("span",null,[e.title]),a()])}},i=()=>{const o=t.value||t.default;if(o||E(e.value))return c("div",{class:[w("value"),e.valueClass]},[o?o():c("span",null,[e.value])])},d=()=>{if(t.icon)return t.icon();if(e.icon)return c(U,{name:e.icon,class:w("left-icon"),classPrefix:e.iconPrefix},null)},s=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const o=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return c(U,{name:o,class:w("right-icon")},null)}};return()=>{var o;const{tag:r,size:f,center:u,border:b,isLink:v,required:m}=e,S=(o=e.clickable)!=null?o:v,g={center:u,required:m,clickable:S,borderless:!b};return f&&(g[f]=!!f),c(r,{class:w(g),role:S?"button":void 0,tabindex:S?0:void 0,onClick:n},{default:()=>{var V;return[d(),l(),i(),s(),(V=t.extra)==null?void 0:V.call(t)]}})}}});const it=P(ot),[se,lt]=B("radio-group"),rt={disabled:Boolean,iconSize:_,direction:String,modelValue:D,checkedColor:String},ce=Symbol(se);var st=k({name:se,props:rt,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const{linkChildren:a}=Be(ce),l=i=>t("update:modelValue",i);return R(()=>e.modelValue,i=>t("change",i)),a({props:e,updateValue:l}),we(()=>e.modelValue),()=>{var i;return c("div",{class:lt([e.direction]),role:"radiogroup"},[(i=n.default)==null?void 0:i.call(n)])}}});const ct=P(st),ue={name:D,shape:$("round"),disabled:Boolean,iconSize:_,modelValue:D,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var ut=k({props:G({},ue,{bem:Ce(Function),role:String,parent:Object,checked:Boolean,bindGroup:T}),emits:["click","toggle"],setup(e,{emit:t,slots:n}){const a=A(),l=u=>{if(e.parent&&e.bindGroup)return e.parent.props[u]},i=y(()=>l("disabled")||e.disabled),d=y(()=>l("direction")),s=y(()=>{const u=e.checkedColor||l("checkedColor");if(u&&e.checked&&!i.value)return{borderColor:u,backgroundColor:u}}),o=u=>{const{target:b}=u,v=a.value,m=v===b||(v==null?void 0:v.contains(b));!i.value&&(m||!e.labelDisabled)&&t("toggle"),t("click",u)},r=()=>{const{bem:u,shape:b,checked:v}=e,m=e.iconSize||l("iconSize");return c("div",{ref:a,class:u("icon",[b,{disabled:i.value,checked:v}]),style:{fontSize:p(m)}},[n.icon?n.icon({checked:v,disabled:i.value}):c(U,{name:"success",style:s.value},null)])},f=()=>{if(n.default)return c("span",{class:e.bem("label",[e.labelPosition,{disabled:i.value}])},[n.default()])};return()=>{const u=e.labelPosition==="left"?[f(),r()]:[r(),f()];return c("div",{role:e.role,class:e.bem([{disabled:i.value,"label-disabled":e.labelDisabled},d.value]),tabindex:i.value?void 0:0,"aria-checked":e.checked,onClick:o},[u])}}});const[dt,ft]=B("radio");var mt=k({name:dt,props:ue,emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{parent:a}=ye(ce),l=()=>(a?a.props.modelValue:e.modelValue)===e.name,i=()=>{a?a.updateValue(e.name):t("update:modelValue",e.name)};return()=>c(ut,I({bem:ft,role:"radio",parent:a,checked:l(),onToggle:i},e),ke(n,["default","icon"]))}});const bt=P(mt),[gt,ee]=B("cell-group"),vt={title:String,inset:Boolean,border:T};var ht=k({name:gt,inheritAttrs:!1,props:vt,setup(e,{slots:t,attrs:n}){const a=()=>{var i;return c("div",I({class:[ee({inset:e.inset}),{[ze]:e.border&&!e.inset}]},n),[(i=t.default)==null?void 0:i.call(t)])},l=()=>c("div",{class:ee("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?c(F,null,[l(),a()]):a()}});const xt=P(ht);const _t=C("h1",{class:"text-[20px] mx-[20px]"},"MJ",-1),pt={class:"w-full flex m-[20px] g-item"},kt={class:"flex w-[200px]"},Ct=["onClick"],yt=["onUpdate:modelValue"],Et={key:0,class:"w-[80px] bg-slate-500 text-white"},$t=["onClick"],Bt={key:0,class:"flex"},St={class:"relative"},wt=["src"],Dt=["onClick"],Pt={key:0,style:{color:"red"}},Ot={__name:"index",setup(e){A();const t=O({prompt:"",taskid:"",imgUrl:"",imgUrls:[],time:1e4,message:"",baseImg:"",load:!1,promptGroup:[{queryTimer:null,baseImg:"",prompt:"",taskid:"",imgUrls:[],message:"",boot:"mj",load:!1}]});async function n(o){if(o.message="",!o.prompt)return;const r={notifyHook:"",boot:o.boot,base64:o.baseImg,prompt:o.prompt,state:""},f=await Y.create({baseURL:"https://mj.yklinga.ltd/apis"}).post("/mj/submit/imagine",r,{headers:{Accept:"application/json"}}).catch(u=>{console.log(u,"iserror")});console.log(f,"from mj java"),f.data.code===1&&(o.load=!0,o.taskid=f.data.result,a(o))}function a(o){o.taskid&&l(o.taskid).then(r=>{if(r.data.status==="FAILURE"){clearTimeout(o.queryTimer),o.load=!1,o.message=`请求失败: ${r.data.failReason}`;return}r.data.status==="SUCCESS"?(clearTimeout(o.queryTimer),o.load=!1,o.imgUrls=r.data.imageUrls):o.queryTimer=setTimeout(()=>{a(o)},t.time)}).catch(r=>{console.log(r,"www")})}async function l(o){return Y.create({baseURL:"https://mj.yklinga.ltd/apis"}).get(`/mj/task/${o}/fetch`).catch(r=>{console.log(r,"iserror")})}const i=o=>{var r=document.createElement("a");r.download=name||"ecommerce_resimg",r.href=o,r.click()},d=()=>{t.promptGroup.push({queryTimer:null,baseImg:"",prompt:"",taskid:"",imgUrls:[],message:"",boot:"mj",load:!1})},s=o=>{t.promptGroup.splice(o,1)};return(o,r)=>{const f=bt,u=it,b=xt,v=ct;return x(),h(F,null,[_t,C("div",{class:"mt-[10px] mx-[20px]"},[C("span",{class:"bg-slate-500 text-white p-[5px] rounded-md cursor-pointer",onClick:d},"add list")]),(x(!0),h(F,null,q(t.promptGroup,(m,S)=>(x(),h("div",pt,[c(v,{modelValue:m.boot,"onUpdate:modelValue":g=>m.boot=g,class:"w-[100px]"},{default:j(()=>[c(b,{inset:""},{default:j(()=>[c(u,{title:"Mj",clickable:"",onClick:g=>m.boot="mj"},{"right-icon":j(()=>[c(f,{name:"mj"})]),_:2},1032,["onClick"]),c(u,{title:"Niji",clickable:"",onClick:g=>m.boot="niji"},{"right-icon":j(()=>[c(f,{name:"niji"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"]),C("div",kt,[C("div",{class:"text-white bg-slate-500 px-[5px] flex items-center",onClick:g=>s(S)}," cut of "+M(S),9,Ct),he(C("textarea",{"onUpdate:modelValue":g=>m.prompt=g,placeholder:"propt",class:"border border-black w-[150px] h-[100px]"},null,8,yt),[[xe,m.prompt]]),m.load?(x(),h("button",Et," load img ")):(x(),h("button",{key:1,class:"w-[80px] bg-slate-500 text-white",onClick:g=>n(m)}," submit ",8,$t))]),m.imgUrls?(x(),h("div",Bt,[(x(!0),h(F,null,q(m.imgUrls,(g,V)=>(x(),h("div",St,[(x(),h("img",{key:V,class:"h-[100px] mr-[20px]",src:g,alt:""},null,8,wt)),C("div",{class:"absolute bottom-[5px] right-[25px] text-white text-xs bg-slate-500 opacity-80 rounded-sm px-[5px] cursor-pointer",onClick:Vt=>i(g)}," 保存 ",8,Dt)]))),256))])):K("",!0)]))),256)),t.message?(x(),h("p",Pt,M(t.message),1)):K("",!0)],64)}}};export{Ot as default};
